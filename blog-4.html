<!DOCTYPE html>
<html lang="en">
<head>
 <title>Python Native GUI with Toga</title>
 <!-- Latest compiled and minified CSS -->
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
 <div class="container">
  <h1><a href="https://codykane.github.io/blog">Blog</a></h1>
 </div>
</head>
<body>
 <div class="container">
<div class="row">
 <div class="col-md-8">
  <h3>Python Native GUI with Toga</h3>
  <label>2019-08-07</label>
  <p>Beeware is a package that allows for apps to be written natively in python and then deployed on Android, Mac, Linux, Windows and others. I'm going to break down Toga, a Python native, OS native GUI toolkit. I'm going to start with building a basic button. </p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">toga</span>
<span class="kn">from</span> <span class="nn">toga.style.pack</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>

<span class="ne">ModuleNotFoundError</span>                       <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">55</span><span class="n">c788f5ed63</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="mi">1</span> <span class="kn">import</span> <span class="nn">toga</span>
<span class="o">----&gt;</span> <span class="mi">2</span> <span class="kn">from</span> <span class="nn">toga.style.pack</span> <span class="kn">import</span> <span class="o">*</span>


<span class="ne">ModuleNotFoundError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">&#39;toga.style&#39;</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">First</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">toga</span><span class="p">,</span> <span class="ow">and</span> <span class="nb">set</span> <span class="n">up</span> <span class="n">a</span> <span class="n">virtual</span> <span class="n">environment</span><span class="o">.</span> 
</pre></div>


<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">toga</span>


<span class="k">def</span> <span class="nf">button_handler</span><span class="p">(</span><span class="n">widget</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Your ass is grass, punk!&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">box</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Box</span><span class="p">()</span>
    <span class="c1">##This is such an intuitive way to make the button, labelling what&#39;s on it, then the response</span>
    <span class="n">button</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s1">&#39;Don</span><span class="se">\&#39;</span><span class="s1">t touch me&#39;</span><span class="p">,</span> <span class="n">on_press</span><span class="o">=</span><span class="n">button_handler</span><span class="p">)</span>
    <span class="n">button</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">button</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">flex</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">box</span>

<span class="c1">##instantiate the app</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">toga</span><span class="o">.</span><span class="n">App</span><span class="p">(</span><span class="s1">&#39;First App&#39;</span><span class="p">,</span> <span class="s1">&#39;org.beeware.helloworld&#39;</span><span class="p">,</span> <span class="n">startup</span><span class="o">=</span><span class="n">build</span><span class="p">)</span>

<span class="c1">##This keeps the app running until it&#39;s closed</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span><span class="o">.</span><span class="n">main_loop</span><span class="p">()</span>
</pre></div>


<p>Now something with a little more oomph; an inch to centimetre calculator. This will include an outer box and two boxes within it, one for input and the other for output, as well as a 'calculate' button. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">c_box</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Box</span><span class="p">()</span>
    <span class="n">i_box</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Box</span><span class="p">()</span>
    <span class="n">box</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Box</span><span class="p">()</span>

    <span class="n">c_input</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span><span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">i_input</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">TextInput</span><span class="p">()</span>

    <span class="n">c_label</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Centimetre&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">Pack</span><span class="p">(</span><span class="n">text_align</span><span class="o">=</span><span class="n">LEFT</span><span class="p">))</span>
    <span class="n">i_label</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Inches&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">Pack</span><span class="p">(</span><span class="n">text_align</span><span class="o">=</span><span class="n">LEFT</span><span class="p">))</span>
    <span class="n">join_label</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;is equivalent to&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">Pack</span><span class="p">(</span><span class="n">text_align</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">))</span>

    <span class="c1">## laying out the conversion equation that will be activated with the click </span>
    <span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">widget</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">c_input</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i_input</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.54</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">c_input</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;???&#39;</span>

    <span class="n">button</span> <span class="o">=</span> <span class="n">toga</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s1">&#39;Calculate&#39;</span><span class="p">,</span> <span class="n">on_press</span><span class="o">=</span><span class="n">calculate</span><span class="p">)</span>

    <span class="n">f_box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">f_input</span><span class="p">)</span>
    <span class="n">f_box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">f_label</span><span class="p">)</span>

    <span class="n">c_box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">join_label</span><span class="p">)</span>
    <span class="n">c_box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c_input</span><span class="p">)</span>
    <span class="n">c_box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c_label</span><span class="p">)</span>

    <span class="n">box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">f_box</span><span class="p">)</span>
    <span class="n">box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c_box</span><span class="p">)</span>
    <span class="n">box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>

    <span class="c1">##adding some stylization </span>
    <span class="n">box</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="n">COLUMN</span><span class="p">,</span> <span class="n">padding_top</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">f_box</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">direction</span> <span class="o">=</span><span class="n">ROW</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">c_box</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="n">ROW</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="n">c_input</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">flex</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">f_input</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">flex</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padding_left</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
    <span class="n">c_label</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">padding_left</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">f_label</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">padding_left</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">join_label</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">padding_right</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">button</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">flex</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">box</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">toga</span><span class="o">.</span><span class="n">App</span><span class="p">(</span><span class="s1">&#39;Measurement Converter&#39;</span><span class="p">,</span> <span class="s1">&#39;org.beeware.f_to_c&#39;</span><span class="p">,</span> <span class="n">startup</span><span class="o">=</span><span class="n">build</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span><span class="o">.</span><span class="n">main_loop</span><span class="p">()</span>
</pre></div>


<p>Though these examples are pretty trite, I think they showcase the potential of this package. These widgets can also be launched with the briefcase module also from beeware. I'm excited to see more projects using this package and how it is developed into the future.</p>
 </div>
</div>
 </div>
</body>
</html>